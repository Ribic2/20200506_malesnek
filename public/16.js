(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{157:function(e,t,a){"use strict";a.r(t);var r=a(155),n=a(129),o=a(33),i=a(12),s=a.n(i),l=(a(21),{components:{Card:n.Card,paypal:r.a},data:function(){return{fullPrice:0,nameOnCard:"",complete:!1,stripeOptions:{hidePostalCode:!0},paypal:{sandbox:"Ad3yEDxZV7gwmFkDAtZqTMRODKM0OJEZJ2w7TZt5YWnEVnbciAQ2DrqpAsv5pPin6T85ITAftj0YchTX",production:"Ad3yEDxZV7gwmFkDAtZqTMRODKM0OJEZJ2w7TZt5YWnEVnbciAQ2DrqpAsv5pPin6T85ITAftj0YchTX"},error:"",overlay:!1}},methods:{pay:function(){var e=this;Object(n.createToken)({name:this.nameOnCard}).then((function(t){for(var a=[],r=[],n=0,i=JSON.parse(localStorage.getItem("cartStorage")),l=0;l<i.length;l++)a.push(i[l].product.itemId),r.push(i[l].quantity),n+=i[l].quantity*i[l].product.itemPrice;n.toFixed(2),e.overlay=!0,s.a.post("/api/order/add",{products:a,userId:e.$store.state.user.userId,quantity:r,fullPrice:n,stripeToken:t.token.id}).then((function(t){t.data.itemsOutOfStock?(e.overlay=!1,e.error="Nekateri izdelki niso na zalogi. Opravičujemo se za to napako."):t.data&&(e.dialog=!0,e.overlay=!1,localStorage.removeItem("cartStorage"),e.$store.state.cart.cart=new Array,o.a.push({name:"checkout",replace:!0}))}))}))},orderPayWhenRecived:function(){for(var e=this,t=[],a=[],r=0,n=JSON.parse(localStorage.getItem("cartStorage")),i=0;i<n.length;i++)t.push(n[i].product.itemId),a.push(n[i].quantity),r+=n[i].quantity*n[i].product.itemPrice;this.overlay=!0,s.a.post("/api/order/add",{products:t,userId:this.$store.state.user.userId,quantity:a,fullPrice:r,typeOfPayment:"home"}).then((function(t){t.data.itemsOutOfStock?(e.overlay=!1,e.error="Nekateri izdelki niso na zalogi. Opravičujemo se za to napako."):t.data&&(e.overlay=!1,localStorage.removeItem("cartStorage"),e.$store.state.cart.cart=new Array,o.a.push({name:"checkout",replace:!0}))}))},getFullPrice:function(){console.log("check");var e=JSON.parse(localStorage.getItem("cartStorage")),t=0;if(null==e||0==e.length)return!1;for(var a=0;a<e.length;a++)t+=e[a].quantity*e[a].product.itemPrice;this.fullPrice=t,this.fullPrice.toString(),this.$store.dispatch("getFullPrice",t)}},mounted:function(){this.getFullPrice()}}),p=(a(185),a(7)),c=a(10),d=a.n(c),u=a(443),v=a(70),h=a(450),m=a(398),g=a(399),f=a(400),y=a(401),x=a(140),b=a(135),k=a(25),P=Object(p.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[1==this.$store.state.user.isAuth?a("div",[a("h1",[e._v("Celotno plačilo: "+e._s(parseFloat(this.$store.state.cart.fullPrice).toFixed(2))+"€")]),e._v(" "),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Kreditna kartica")]),e._v(" "),a("v-expansion-panel-content",[a("div",{attrs:{id:"app"}},[a("v-text-field",{attrs:{label:"Name on card",type:"text"},model:{value:e.nameOnCard,callback:function(t){e.nameOnCard=t},expression:"nameOnCard"}}),e._v(" "),a("card",{staticClass:"stripe-card",class:{complete:e.complete},attrs:{stripe:"pk_test_6GetaNtlFSAZ94wdJEcGR4vN0066MegJBC",options:e.stripeOptions},on:{change:function(t){e.complete=t.complete}}}),e._v(" "),a("button",{staticClass:"pay-with-stripe",attrs:{disabled:!e.complete},on:{click:e.pay}},[e._v("Plačaj")])],1)])],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Paypal")]),e._v(" "),a("v-expansion-panel-content",[a("paypal",{attrs:{amount:e.fullPrice.toString(),currency:"USD",env:"sandbox",client:e.paypal}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Plačilo ob prevzetju")]),e._v(" "),a("v-expansion-panel-content",[e._v("\n                Plačali boste za izdelke, ko jih dostavimo na dom.\n                "),a("br"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.orderPayWhenRecived()}}},[e._v("\n                Oddaj naročilo\n                ")])],1)],1)],1),e._v(" "),0!=e.error.length?a("v-alert",{attrs:{type:"error",width:"400",transition:"fade-transition"}},[e._v("\n        "+e._s(e.error)+"\n        ")]):e._e(),e._v(" "),a("v-overlay",{attrs:{value:e.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1):a("div",[a("h1",[e._v("You need to comfirm your mail first")])])])}),[],!1,null,"546edb08",null);t.default=P.exports;d()(P,{VAlert:u.a,VBtn:v.a,VContainer:h.a,VExpansionPanel:m.a,VExpansionPanelContent:g.a,VExpansionPanelHeader:f.a,VExpansionPanels:y.a,VOverlay:x.a,VProgressCircular:b.a,VTextField:k.a})},185:function(e,t,a){"use strict";var r=a(79);a.n(r).a},186:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,"\n#app[data-v-546edb08]{\r\n    height: 200px;\r\n    max-width: 400px;\r\n    width: auto;\n}\n.pay-with-stripe[data-v-546edb08]{\r\n    display: block;\r\n    width: 100%;\r\n    height: 40px;\r\n    background-color: #fcd669;\r\n    border-radius: 20px;\r\n    color: #525f7f;\r\n    font-weight: 600;\r\n    margin: 0 auto;\r\n    margin-top: 10px;\r\n    text-transform: uppercase;\r\n    cursor: pointer;\n}\n.pay-with-stripe[data-v-546edb08]:active{\r\n    background-color: #f5be58;\n}\n.stripe-card[data-v-546edb08] {\r\n    width: 100%;\r\n    height: 25px;\r\n    background-color: #7488aa;\r\n    color: white;\r\n    position: relative;\r\n    top: 5px;\r\n    padding-right: 10px;\r\n    padding-left: 10px;\r\n    padding-top: 1px;\r\n    border-radius: 20px;\r\n    margin: 0 auto;\n}\n.stripe-card.complete[data-v-546edb08] {\r\n  border-color: green;\n}\r\n",""])},79:function(e,t,a){var r=a(186);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(5)(r,n);r.locals&&(e.exports=r.locals)}}]);